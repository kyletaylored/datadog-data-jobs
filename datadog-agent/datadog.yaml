api_key: ${DD_API_KEY}

# Add your Datadog API key to enable monitoring
# If not provided, the agent will not function

# Use this to enable EU Datadog site
# site: datadoghq.eu

logs_enabled: true

# APM configuration
apm_config:
  enabled: true
  apm_non_local_traffic: true

# Log configuration
logs_config:
  container_collect_all: true

# Process monitoring
process_config:
  enabled: true
  process_collection:
    enabled: true

# Python tracing
python_version: 3

# Integration settings
integrations:
  # PostgreSQL integration
  postgres:
    init_config:
    instances:
      - host: postgres
        port: 5432
        username: datadog
        password: datadog
        dbname: datadog_demo
        tags:
          - service:postgres
          - env:demo

  # RabbitMQ integration
  rabbitmq:
    init_config:
    instances:
      - rabbitmq_api_url: http://rabbitmq:15672/api/
        rabbitmq_user: guest
        rabbitmq_pass: guest
        tags:
          - service:rabbitmq
          - env:demo

  # Redis integration if needed
  # redis:
  #   init_config:
  #   instances:
  #     - host: redis
  #       port: 6379
  #       tags:
  #         - service:redis
  #         - env:demo

  # Celery integration
  celery:
    init_config:
    instances:
      - tags:
          - service:celery
          - env:demo

# Tag configuration
tags:
  - env:demo
  - service:datadog-demo
  - app:data-pipeline
